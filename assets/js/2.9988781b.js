(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{371:function(s,t,a){s.exports=a.p+"assets/img/image-20231015131823928.12c08187.png"},372:function(s,t,a){s.exports=a.p+"assets/img/image-20231015111831900.94252de0.png"},373:function(s,t,a){s.exports=a.p+"assets/img/image-20231014175513254.29e62ecf.png"},374:function(s,t,a){s.exports=a.p+"assets/img/image-20231015114723626.3b978b97.png"},375:function(s,t,a){s.exports=a.p+"assets/img/image-20231015113551428.241592ec.png"},376:function(s,t,a){s.exports=a.p+"assets/img/image-20231015113646214.2e60de47.png"},377:function(s,t,a){s.exports=a.p+"assets/img/image-20231015113718603.c74d7e51.png"},378:function(s,t,a){s.exports=a.p+"assets/img/image-20231015113811839.830e7d91.png"},379:function(s,t,a){s.exports=a.p+"assets/img/image-20231015113919889.c55b168c.png"},380:function(s,t,a){s.exports=a.p+"assets/img/image-20231015114047483.47750ea3.png"},381:function(s,t,a){s.exports=a.p+"assets/img/image-20231014161843158.a9ee0970.png"},382:function(s,t,a){s.exports=a.p+"assets/img/image-20231014164539350.575a16ee.png"},383:function(s,t,a){s.exports=a.p+"assets/img/image-20231014174031520.05fdf64a.png"},384:function(s,t,a){s.exports=a.p+"assets/img/image-20231014174147604.1389ac94.png"},385:function(s,t,a){s.exports=a.p+"assets/img/image-20231014174634764.458dde8b.png"},386:function(s,t,a){s.exports=a.p+"assets/img/image-20231015130420756.2f4994d2.png"},387:function(s,t,a){s.exports=a.p+"assets/img/image-20231015162814965.4932c7e7.png"},388:function(s,t,a){s.exports=a.p+"assets/img/image-20231015134311818.d78c2b5a.png"},389:function(s,t,a){s.exports=a.p+"assets/img/image-20231015134223083.f60c76f1.png"},390:function(s,t,a){s.exports=a.p+"assets/img/image-20231015135637702.03b7dd7a.png"},391:function(s,t,a){s.exports=a.p+"assets/img/image-20231015135735497.3bc70dec.png"},392:function(s,t,a){s.exports=a.p+"assets/img/image-20231015140804020.0ff35aaf.png"},393:function(s,t,a){s.exports=a.p+"assets/img/image-20231015141406697.5c6eb618.png"},394:function(s,t,a){s.exports=a.p+"assets/img/image-20231015145255901.ba582b3a.png"},395:function(s,t,a){s.exports=a.p+"assets/img/image-20231015145350143.bc100c50.png"},396:function(s,t,a){s.exports=a.p+"assets/img/image-20231015145536827.e9c2fa58.png"},397:function(s,t,a){s.exports=a.p+"assets/img/image-20231015145640020.f49ed8c1.png"},398:function(s,t,a){s.exports=a.p+"assets/img/image-20231015151038734.ffdc5c52.png"},399:function(s,t,a){s.exports=a.p+"assets/img/image-20231015151459197.2a07eee0.png"},400:function(s,t,a){s.exports=a.p+"assets/img/image-20231015161311078.7fc93a3d.png"},401:function(s,t,a){s.exports=a.p+"assets/img/image-20231015161411083.03ae731b.png"},402:function(s,t,a){s.exports=a.p+"assets/img/image-20231015163509556.79270843.png"},403:function(s,t){s.exports="data:image/png;base64,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"},404:function(s,t,a){s.exports=a.p+"assets/img/image-20231015165128912.725faf50.png"},405:function(s,t,a){s.exports=a.p+"assets/img/image-20231015170901015.fde82445.png"},406:function(s,t,a){s.exports=a.p+"assets/img/image-20231015172433453.494acade.png"},407:function(s,t){s.exports="data:image/png;base64,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"},408:function(s,t){s.exports="data:image/png;base64,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"},409:function(s,t,a){s.exports=a.p+"assets/img/image-20231016210013727.6c6991d6.png"},410:function(s,t,a){s.exports=a.p+"assets/img/image-20231016223814967.de4cdec7.png"},411:function(s,t,a){s.exports=a.p+"assets/img/image-20231016225005121.c4bdf3a4.png"},412:function(s,t,a){s.exports=a.p+"assets/img/image-20231016222539627.fcf68482.png"},480:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"elasticsearch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch"}},[s._v("#")]),s._v(" ElasticSearch")]),s._v(" "),t("h2",{attrs:{id:"介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),t("p",[s._v("官方文档：https://www.elastic.co/guide/cn/elasticsearch/guide/current/intro.html")]),s._v(" "),t("p",[t("img",{attrs:{src:a(371),alt:"image-20231015131823928"}})]),s._v(" "),t("p",[s._v("Elastic Saerch是一个分布式全文搜索引擎，是一种文档数据库。")]),s._v(" "),t("p",[s._v("它和关系型数据库一样需要存储一条条记录(数据)，与关系型数据库不同的地方是"),t("strong",[s._v("索引")]),t("a",{attrs:{href:"**%E7%B4%A2%E5%BC%95**(%E4%B8%8A%E9%9D%A2%E7%9A%84%E7%B4%A2%E5%BC%95%E6%8C%87%E7%9A%84%E6%98%AF%E7%94%A8%E4%BA%8E%E5%BF%AB%E9%80%9F%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%8C%E4%B8%8E%E4%B8%8B%E9%9D%A2%E6%89%80%E8%AF%B4%E7%9A%84%E7%B4%A2%E5%BC%95%E4%B8%8D%E5%90%8C)"}},[s._v("^1")]),s._v("组织的方式和查询记录的方式。elasticsearch使用倒排索引来查询数据。")]),s._v(" "),t("p",[s._v("ElasticSearch基于C/S架构，默认端口号9200，它的操作都是使用http请求完成。")]),s._v(" "),t("h2",{attrs:{id:"基本概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[s._v("#")]),s._v(" 基本概念")]),s._v(" "),t("p",[s._v("elasticSearch是一种文档数据库")]),s._v(" "),t("ul",[t("li",[s._v("字段(Field)：类似于关系型数据库中的字段")]),s._v(" "),t("li",[s._v("文档(document)：类似于关系型数据库中的一行记录")]),s._v(" "),t("li",[s._v("映射(mapping)：类似于关系型数据库中的表结构定义")]),s._v(" "),t("li",[s._v("索引(index)：类似于关系型数据库中的数据库概念")]),s._v(" "),t("li",[s._v("类型(Type)：类似于关系型数据库中的表")])]),s._v(" "),t("h2",{attrs:{id:"倒排索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#倒排索引"}},[s._v("#")]),s._v(" 倒排索引")]),s._v(" "),t("p",[s._v("此处所说的索引是用于快速访问数据的数据结构")]),s._v(" "),t("h3",{attrs:{id:"正排"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#正排"}},[s._v("#")]),s._v(" 正排")]),s._v(" "),t("p",[s._v("根据document找它包含的关键词")]),s._v(" "),t("h3",{attrs:{id:"倒排"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#倒排"}},[s._v("#")]),s._v(" 倒排")]),s._v(" "),t("p",[s._v("根据关键字找包含这个关键词的document。")]),s._v(" "),t("p",[t("strong",[s._v("添加索引")]),s._v("：数据(document)在添加时，会针对字符串类型的字段创建索引。具体的方式是，将字符串类型的字段进行"),t("strong",[s._v("分词")]),s._v("，然后以这些分出来的关键词为key，value部分存储包含这个关键词的document的id。")]),s._v(" "),t("p",[t("strong",[s._v("根据索引查询记录(搜索)")]),s._v("：")]),s._v(" "),t("h2",{attrs:{id:"数据类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据类型"}},[s._v("#")]),s._v(" 数据类型")]),s._v(" "),t("p",[t("strong",[s._v("字符串")]),s._v("：text(会分词，不支持聚合)、keyword(不会分词，将全部内容作为一个词条，支持聚合)")]),s._v(" "),t("p",[t("strong",[s._v("数值")]),s._v("：long、integer、short、byte、double、float、half_float、scaled_float")]),s._v(" "),t("p",[t("strong",[s._v("布尔")]),s._v("：boolean")]),s._v(" "),t("p",[t("strong",[s._v("二进制")]),s._v("：binary")]),s._v(" "),t("p",[t("strong",[s._v("范围类型")]),s._v("：integer_range、float_range、long_range、double_range、date_range")]),s._v(" "),t("p",[t("strong",[s._v("日期")]),s._v("：date")]),s._v(" "),t("p",[t("strong",[s._v("数组")]),s._v("：[]")]),s._v(" "),t("p",[t("strong",[s._v("对象")]),s._v("：{}")]),s._v(" "),t("h2",{attrs:{id:"elasticsearch环境搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch环境搭建"}},[s._v("#")]),s._v(" ElasticSearch环境搭建")]),s._v(" "),t("p",[s._v("在Linux的docker容器中部署ealsticsearch")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull elasticsearch:7.8.0\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意如果是ARM架构的计算机，那么下载的ES镜像的版本如下：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull elasticsearch:7.13.1\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 准备工作")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /mydata/elasticsearch/plugins /mydata/elasticsearch/data\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-R")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" /mydata/elasticsearch\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v(":9200 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9300")]),s._v(":9300 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" elasticsearch "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovery.type=single-node"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ES_JAVA_OPTS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Xms256m -Xmx256m"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /mydata/elasticsearch/plugins/:/usr/share/elasticsearch/plugins "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /mydata/elasticsearch/data/:/usr/share/elasticsearch/data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" elasticsearch:7.8.0\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意，ARM架构的计算机，使用的镜像版本为elasticsearch:7.13.1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试验证，访问http://ip:9200")]),s._v("\n")])])]),t("p",[s._v("部署成功后")]),s._v(" "),t("p",[t("img",{attrs:{src:a(372),alt:"image-20231015111831900"}})]),s._v(" "),t("p",[s._v("将分词器放入/opt/es目录下")]),s._v(" "),t("p",[s._v("先在/opt目录下创建一个es目录，并将它的权限修改为777(可读、可写、可执行)")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" es\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" es\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 上传资料中的IK分词器压缩包到Linux主机/opt/es目录下")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 解压")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" elasticsearch-analysis-ik-7.8.0.zip "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" ik-analyzer\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意如果是ARM架构的计算机，那么使用的ik分词器的版本也要是7.13.1，所以命令如下：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" elasticsearch-analysis-ik-7.13.1.zip "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" ik-analyzer\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3. 上传到ES容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" ./ik-analyzer elasticsearch:/usr/share/elasticsearch/plugins\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4. 重启ES")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" restart elasticsearch\n")])])]),t("h2",{attrs:{id:"kibana环境搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kibana环境搭建"}},[s._v("#")]),s._v(" kibana环境搭建")]),s._v(" "),t("p",[s._v("kibana相当于ealsticsearch的客户端")]),s._v(" "),t("p",[t("img",{attrs:{src:a(373),alt:"image-20231014175513254"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(374),alt:"image-20231015114723626"}})]),s._v(" "),t("p",[s._v("在Linux的docker容器中部署kibana")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull kibana:7.8.0\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意如果计算机为ARM架构，如果使用的ES版本为7.13.1那么，Kibaba的版本也要相应使用7.13.1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull kibana:7.13.1\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" kibana "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ELASTICSEARCH_URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://虚拟机ip或者云服务器ip:9200 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5601")]),s._v(":5601 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" kibana:7.8.0\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 举例")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" kibana "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ELASTICSEARCH_URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://192.168.140.134/:9200 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5601")]),s._v(":5601 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" kibana:7.8.0\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ARM架构的计算机，使用如下命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" kibana "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ELASTICSEARCH_URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://虚拟机ip或者云服务器ip:9200 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5601")]),s._v(":5601 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" kibana:7.13.1\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" kibana /bin/bash\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" config/kibana.yml\nelasticsearch.hosts: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://这里改为你自己的虚拟机IP:9200"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存退出并且 重启kibana")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" restart kibana\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试验证，访问http://ip:5601")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试IK分词器")]),s._v("\nGET /_analyze\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Elasticsearch 是一个开源的搜索引擎，建立在一个全文搜索引擎库 Apache Lucene™ 基础之上。"')]),s._v(",\n\t"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"analyzer"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ik_max_word"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"restful-api操作es-使用http"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#restful-api操作es-使用http"}},[s._v("#")]),s._v(" RESTful API操作ES(使用Http)")]),s._v(" "),t("p",[s._v("以下操作都是在kibana客户端中完成，kibana中配置了elasticsearch服务端的ip和端口号，因此在kibana中可以省略请求中的ip和端口号。")]),s._v(" "),t("p",[s._v("以创建索引为例")]),s._v(" "),t("p",[s._v("原始的请求为：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("PUT http://ip:端口号/索引名称\n")])])]),t("p",[s._v("在kibana中请求为：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("PUT 索引名称\n")])])]),t("h3",{attrs:{id:"操作索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#操作索引"}},[s._v("#")]),s._v(" 操作索引")]),s._v(" "),t("p",[s._v('以索引"user"举例')]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建索引")]),s._v("\nPUT user\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查询索引")]),s._v("\nGET user\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除索引")]),s._v("\nDELETE user\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#关闭、打开索引")]),s._v("\nPOST user/_close\nPOST user/_open\n")])])]),t("h3",{attrs:{id:"操作映射"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#操作映射"}},[s._v("#")]),s._v(" 操作映射")]),s._v(" "),t("p",[s._v("添加映射")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PUT")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("_mapping\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        \t"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"analyzer"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ik_max_word"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"integer"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"address"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"analyzer"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ik_max_word"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("创建索引并添加映射")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PUT")]),s._v(" user\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mapping"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       \t\t#配置映射\n    \t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("添加字段：和添加映射一样")]),s._v(" "),t("h3",{attrs:{id:"操作文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#操作文档"}},[s._v("#")]),s._v(" 操作文档")]),s._v(" "),t("p",[s._v("添加文档，指定id，不指定id会自动生成")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("POST user/_doc/1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"张三"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v(":18,\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"address"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"湖北武汉"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(375),alt:"image-20231015113551428"}})]),s._v(" "),t("p",[s._v("查询文档")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询所有文档")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据id查询文档")]),s._v("\nGET user/_doc/1\n")])])]),t("p",[t("img",{attrs:{src:a(376),alt:"image-20231015113646214"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(377),alt:"image-20231015113718603"}})]),s._v(" "),t("p",[s._v("修改文档")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全量修改（和添加文档方法一样）")]),s._v("\nPOST user/_doc/1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"孙悟空"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v(":900,\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"address"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"花果山"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 部分修改")]),s._v("\nPOST user/_update/1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"doc"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"李四"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(378),alt:"image-20231015113811839"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(379),alt:"image-20231015113919889"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(380),alt:"image-20231015114047483"}})]),s._v(" "),t("p",[s._v("删除文档")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("DELETE user/_doc/1\n")])])]),t("h2",{attrs:{id:"java操作es"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#java操作es"}},[s._v("#")]),s._v(" Java操作ES")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th"),s._v(" "),t("th",[s._v("代理对象Client")]),s._v(" "),t("th",[s._v("增")]),s._v(" "),t("th",[s._v("删")]),s._v(" "),t("th",[s._v("改")]),s._v(" "),t("th",[s._v("查")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("索引操作")]),s._v(" "),t("td",[s._v("RestHighLevelClient的indcies()")]),s._v(" "),t("td",[s._v("CreateIndexRequest")]),s._v(" "),t("td",[s._v("DeleteindexRequest")]),s._v(" "),t("td",[s._v("索引没有修改的操作")]),s._v(" "),t("td",[s._v("GetIndexRequest")])]),s._v(" "),t("tr",[t("td",[s._v("文档操作")]),s._v(" "),t("td",[s._v("RestHighLevelClient")]),s._v(" "),t("td",[s._v("IndexRequest")]),s._v(" "),t("td",[s._v("DeleteRequest")]),s._v(" "),t("td",[s._v("UpdateRequest、IndexRequest()")]),s._v(" "),t("td",[s._v("GetRequest")])]),s._v(" "),t("tr",[t("td",[s._v("Client发送请求的方法")]),s._v(" "),t("td"),s._v(" "),t("td",[s._v("create/index")]),s._v(" "),t("td",[s._v("delete")]),s._v(" "),t("td",[s._v("update")]),s._v(" "),t("td",[s._v("get")])])])]),s._v(" "),t("p",[s._v('对于索引和文档的操作中，首先要获取一个"代理对象"(用于发送请求)，然后创建一个请求的对象，最后使用代理对象将请求发送出去。')]),s._v(" "),t("p",[s._v('对索引的操作首先要通过RestHighLevelClient对象获取IndicesClient对象作为"代理对象"')]),s._v(" "),t("p",[s._v("索引操作和文档操作中涉及到的数据发送都通过它们相应的请求设置")]),s._v(" "),t("h3",{attrs:{id:"索引操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引操作"}},[s._v("#")]),s._v(" 索引操作")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestHighLevelClient")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("获取 操作索引的对象indices")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code")])]),t("p",[s._v("构造“创建索引请求”CreateIndexRequest")]),s._v(" "),t("p",[s._v("使用操作索引的对象发送请求indices.create()")]),s._v(" "),t("h4",{attrs:{id:"增"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#增"}},[s._v("#")]),s._v(" 增")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addIndex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取 操作索引的对象indices")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IndicesClient")]),s._v(" indices "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("indices")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//构造“创建索引请求”CreateIndexRequest")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CreateIndexRequest")]),s._v(" createIndexRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CreateIndexRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test_product"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//使用操作索引的对象发送请求indices.create()")]),s._v("\n    indices"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("createIndexRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("添加索引同时添加映射")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v(" \t"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mappingTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IndicesClient")]),s._v(" indices "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("indices")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CreateIndexRequest")]),s._v(" createIndexRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CreateIndexRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test_mapping4"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//错误写法")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//        String mapping = "\\"properties\\":{\\n" +')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//                "        \\"name\\":{\\n" +')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//                "          \\"type\\":\\"text\\",\\n" +')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//                "          \\"analyzer\\": \\"ik_max_word\\"\\n" +')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//                "        },\\n" +')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//                "        \\"age\\":{\\n" +')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//                "          \\"type\\":\\"integer\\"\\n" +')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//                "        },\\n" +')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//                "        \\"address\\":{\\n" +')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//                "          \\"type\\":\\"text\\",\\n" +')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//                "          \\"analyzer\\": \\"ik_max_word\\"\\n" +')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//                "        }\\n" +')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//                "    }";')]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" mapping "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"    \\"properties\\":{\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"name\\":{\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"          \\"type\\":\\"text\\",\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"          \\"analyzer\\": \\"ik_max_word\\"\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        },\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"age\\":{\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"          \\"type\\":\\"integer\\"\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        },\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        \\"address\\":{\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"          \\"type\\":\\"text\\",\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"          \\"analyzer\\": \\"ik_max_word\\"\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"        }\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"    }\\n"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        createIndexRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mapping"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XContentType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CreateIndexResponse")]),s._v(" createIndexResponse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" indices"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("createIndexRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("createIndexResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h4",{attrs:{id:"删"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删"}},[s._v("#")]),s._v(" 删")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//删除索引")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("deleteIndex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IndicesClient")]),s._v(" indices "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("indices")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DeleteIndexRequest")]),s._v(" deleteIndexRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DeleteIndexRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test_mapping2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AcknowledgedResponse")]),s._v(" acknowledgedResponse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" indices"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("delete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("deleteIndexRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"acknowledgedResponse = "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" acknowledgedResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isAcknowledged")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h4",{attrs:{id:"查"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查"}},[s._v("#")]),s._v(" 查")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("queryIndex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IndicesClient")]),s._v(" indices "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("indices")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetIndexRequest")]),s._v(" getIndexRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetIndexRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test_mapping"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetIndexResponse")]),s._v(" getIndexResponse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" indices"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("getIndexRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MappingMetadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" mappings "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" getIndexResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getMappings")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" mappings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("keySet")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key = "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value = "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" mappings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSourceAsMap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h3",{attrs:{id:"文档操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文档操作"}},[s._v("#")]),s._v(" 文档操作")]),s._v(" "),t("h4",{attrs:{id:"增-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#增-2"}},[s._v("#")]),s._v(" 增")]),s._v(" "),t("p",[s._v("Map格式的数据可以直接接收，自定义类型对象需要使用JSON格式")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addDoc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"张三"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setAge")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setAddress")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"湖北宜昌"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IndexRequest")]),s._v(" indexRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IndexRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//document的id")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XContentType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置document的数据，格式设置为json")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IndexResponse")]),s._v(" response "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("index")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("indexRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(381),alt:"image-20231014161843158"}})]),s._v(" "),t("h4",{attrs:{id:"删-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删-2"}},[s._v("#")]),s._v(" 删")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//删除文档")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("deleteDoc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DeleteRequest")]),s._v(" deleteRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DeleteRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DeleteResponse")]),s._v(" deleteResponse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("delete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("deleteRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("deleteResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h4",{attrs:{id:"改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#改"}},[s._v("#")]),s._v(" 改")]),s._v(" "),t("p",[t("strong",[s._v("全量修改")])]),s._v(" "),t("p",[s._v("和新增的方法一样，存在该文档就修改，不存在就新建")]),s._v(" "),t("p",[t("strong",[s._v("增量修改")])]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//增量修改，只修改文档的一部分")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("updateDoc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UpdateRequest")]),s._v(" updateRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UpdateRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//使用Map存放要修改的数据")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" data "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"address"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"新疆伊犁"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将数据放入updateRequest")]),s._v("\n    updateRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("doc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UpdateResponse")]),s._v(" updateResponse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("updateRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("updateResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(382),alt:"image-20231014164539350"}})]),s._v(" "),t("h4",{attrs:{id:"查-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查-2"}},[s._v("#")]),s._v(" 查")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//查询文档")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("queryDoc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetRequest")]),s._v(" getRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GetResponse")]),s._v(" getResponse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("getRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("getResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSourceAsString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"elasticsearch的高级操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch的高级操作"}},[s._v("#")]),s._v(" ElasticSearch的高级操作")]),s._v(" "),t("h3",{attrs:{id:"批量操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#批量操作"}},[s._v("#")]),s._v(" 批量操作")]),s._v(" "),t("h4",{attrs:{id:"语法格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#语法格式"}},[s._v("#")]),s._v(" 语法格式")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("POST _bulk\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"操作名"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("索引键值对, id键值对"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("携带有数据的，比如添加、删除，将数据写在命令的下一行，")]),s._v(" "),t("h4",{attrs:{id:"批量添加"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#批量添加"}},[s._v("#")]),s._v(" 批量添加")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 批量添加")]),s._v("\nPOST _bulk\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"create"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_index"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"张三"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"create"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_index"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"李四"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"create"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_index"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"王五"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v('上面{"name": "张三", "age": 18}这种格式就是要添加的数据')]),s._v(" "),t("p",[t("img",{attrs:{src:a(383),alt:"image-20231014174031520"}})]),s._v(" "),t("h4",{attrs:{id:"批量删除"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#批量删除"}},[s._v("#")]),s._v(" 批量删除")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 批量删除")]),s._v("\nPOST _bulk\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"delete"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_index"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"delete"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_index"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"delete"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_index"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"delete"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_index"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(384),alt:"image-20231014174147604"}})]),s._v(" "),t("h4",{attrs:{id:"批量修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#批量修改"}},[s._v("#")]),s._v(" 批量修改")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("POST _bulk\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"update"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_index"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"doc"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"修改后的张三"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v(":28"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"update"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_index"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"doc"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"修改后的李四"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v(":28"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"update"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_index"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"_id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"doc"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"修改后的王五"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v(":28"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(385),alt:"image-20231014174634764"}})]),s._v(" "),t("h3",{attrs:{id:"高级查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#高级查询"}},[s._v("#")]),s._v(" 高级查询")]),s._v(" "),t("h4",{attrs:{id:"使用restful-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用restful-api"}},[s._v("#")]),s._v(" 使用RESTful API")]),s._v(" "),t("h5",{attrs:{id:"match-all查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#match-all查询"}},[s._v("#")]),s._v(" match all查询")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# match_all查询 ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# from：从查询结果第几条记录开始返回")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# size：共返回多少条记录")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"match_all"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"from"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"size"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h5",{attrs:{id:"term查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#term查询"}},[s._v("#")]),s._v(" term查询")]),s._v(" "),t("p",[s._v("官方文档的描述：")]),s._v(" "),t("p",[t("code",[s._v("term")]),s._v(" 查询被用于精确值匹配，这些精确值可能是数字、时间、布尔或者那些 "),t("code",[s._v("not_analyzed")]),s._v(" 的字符串：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"term"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"term"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"date"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2014-09-01"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"term"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"public"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"term"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tag"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"full_text"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("code",[s._v("term")]),s._v(" 查询对于"),t("strong",[s._v("输入的文本")]),s._v("不 "),t("em",[s._v("分析")]),s._v(" ，所以它将给定的值进行精确查询。")]),s._v(" "),t("p",[t("img",{attrs:{src:a(386),alt:"image-20231015130420756"}})]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## term查询")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"term"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(387),alt:"image-20231015162814965"}})]),s._v(" "),t("h5",{attrs:{id:"match查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#match查询"}},[s._v("#")]),s._v(" match查询")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# match查询")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"match"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"修改后的李四"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(388),alt:"image-20231015134311818"}})]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# match查询 使用and")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"match"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"修改后的李四"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"operator"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"and"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(389),alt:"image-20231015134223083"}})]),s._v(" "),t("h5",{attrs:{id:"querystring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#querystring"}},[s._v("#")]),s._v(" querystring")]),s._v(" "),t("p",[s._v('可以识别query中的连接符"OR"/"AND"')]),s._v(" "),t("p",[s._v("使用OR的话，只要给定的字段中出现任一关键词，就会匹配成功。")]),s._v(" "),t("p",[s._v("使用AND的话，只要在给定所有的字段中能找到所有给定的关键词(用AND连接的关键词)，就会匹配成功。")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## querystring查询 使用or")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query_string"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fields"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"address"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"额尔古纳 OR 李四"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(390),alt:"image-20231015135637702"}})]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## querystring查询 使用and")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query_string"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fields"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"address"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"额尔古纳 AND 李四"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(391),alt:"image-20231015135735497"}})]),s._v(" "),t("h5",{attrs:{id:"范围、排序查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#范围、排序查询"}},[s._v("#")]),s._v(" 范围、排序查询")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 范围查询")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"range"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gte"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lte"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(392),alt:"image-20231015140804020"}})]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 范围查询 + 排序")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"range"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gte"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lte"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sort"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"order"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"desc"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(393),alt:"image-20231015141406697"}})]),s._v(" "),t("h5",{attrs:{id:"bool复合查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bool复合查询"}},[s._v("#")]),s._v(" bool复合查询")]),s._v(" "),t("p",[s._v("对多个查询条件连接")]),s._v(" "),t("p",[s._v("主要分为四种连接方式")]),s._v(" "),t("ul",[t("li",[s._v("must：相当于and，条件必须成立")]),s._v(" "),t("li",[s._v("must_not：相当于not，条件必须不成立")]),s._v(" "),t("li",[s._v("should：相当于or，条件可以成立")]),s._v(" "),t("li",[s._v("filter：条件必须成立，性能比must高，不会计算相似度得分score")])]),s._v(" "),t("p",[s._v("格式")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bool查询格式")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bool"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"must"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        查询表达式\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("must")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bool查询 must")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bool"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"must"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"term"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"match"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"address"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"湖北"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(394),alt:"image-20231015145255901"}})]),s._v(" "),t("p",[s._v("must_not")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bool查询 must_not")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bool"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"must_not"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"match"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"address"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"湖北宜昌"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(395),alt:"image-20231015145350143"}})]),s._v(" "),t("p",[s._v("should")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bool查询 should 多个条件之间是or关系")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bool"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"should"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"term"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"match"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"address"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"湖北荆州"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(396),alt:"image-20231015145536827"}})]),s._v(" "),t("p",[s._v("filter")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bool查询 filter")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bool"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"filter"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"term"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"match"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"address"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"湖北"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(397),alt:"image-20231015145640020"}})]),s._v(" "),t("h5",{attrs:{id:"聚合查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#聚合查询"}},[s._v("#")]),s._v(" 聚合查询")]),s._v(" "),t("p",[s._v("聚合查询分为两种：\n指标聚合：类似于MySQL的聚合函数。有max、min、avg、sum等")]),s._v(" "),t("p",[s._v('桶聚合：相当于MySQL的group by操作。不要对text类型的字段进行分组，会失败。"操作类型"为terms')]),s._v(" "),t("p",[s._v("格式")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aggs"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"别名"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"聚合操作类型"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"field"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"字段名"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("指标聚合")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指标聚合")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"range"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gte"')]),s._v(":10,\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lte"')]),s._v(":20\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aggs"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max_age"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"field"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(398),alt:"image-20231015151038734"}})]),s._v(" "),t("p",[s._v("桶聚合")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 桶聚合")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"range"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gte"')]),s._v(":10,\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lte"')]),s._v(":20\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aggs"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age_bucket"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"terms"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"field"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(399),alt:"image-20231015151459197"}})]),s._v(" "),t("h5",{attrs:{id:"高亮查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#高亮查询"}},[s._v("#")]),s._v(" 高亮查询")]),s._v(" "),t("h4",{attrs:{id:"在java中使用查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在java中使用查询"}},[s._v("#")]),s._v(" 在Java中使用查询")]),s._v(" "),t("h5",{attrs:{id:"发送查询请求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发送查询请求"}},[s._v("#")]),s._v(" 发送查询请求")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 创建SearchRequest对象作为请求")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 创建SearchSourceBuilder用于携带查询参数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 使用QueryBuilders.查询方式名Query()创建查询方式对象，用于携带相应的查询参数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 将参数放入请求：searchRequest.source(searchSourceBuilder)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5. 使用RestHighLevelClient对象的search方法发送SearchRequest请求")]),s._v("\n")])])]),t("p",[s._v("怎么设置请求携带的参数：")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("参数名"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("参数值"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("怎么指定查询方式：")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("查询方式名"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h5",{attrs:{id:"接收响应的查询结果"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#接收响应的查询结果"}},[s._v("#")]),s._v(" 接收响应的查询结果")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 获取查询结果hits")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 从查询结果hits中获取所有记录集合hits")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 遍历第二级hits中，遍历的元素中_source字段才是真正的数据")]),s._v("\n")])])]),t("h5",{attrs:{id:"match-all查询-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#match-all查询-2"}},[s._v("#")]),s._v(" match all查询")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("\t"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestHighLevelClient")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("matchAllTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//发送请求")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 创建SearchRequest对象作为请求")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),s._v(" searchRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 创建SearchSourceBuilder用于携带查询参数")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),s._v(" searchSourceBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 使用QueryBuilders.查询方式名Query()创建查询方式对象，用于携带相应的查询参数")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MatchAllQueryBuilder")]),s._v(" matchAllQueryBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("matchAllQuery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("matchAllQueryBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("from")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("size")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 将参数放入请求：searchRequest.source(searchSourceBuilder)")]),s._v("\n        searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5. 使用RestHighLevelClient对象的search方法发送SearchRequest请求")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchResponse")]),s._v(" searchResponse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("search")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理结果")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 获取查询结果hits")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHits")]),s._v(" searchHits "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" total "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getTotalHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 从查询结果hits中获取所有记录集合hits")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" hits "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 遍历第二级hits中，遍历的元素中_source字段才是真正的数据")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHit")]),s._v(" searchHit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" hits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" source "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSourceAsString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("from: 0, size: 3查询结果")]),s._v(" "),t("p",[t("img",{attrs:{src:a(400),alt:"image-20231015161311078"}})]),s._v(" "),t("p",[s._v("from: 0, size: 30查询结果")]),s._v(" "),t("p",[t("img",{attrs:{src:a(401),alt:"image-20231015161411083"}})]),s._v(" "),t("h5",{attrs:{id:"term查询-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#term查询-2"}},[s._v("#")]),s._v(" term查询")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("termTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//发送请求")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),s._v(" searchRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),s._v(" searchSourceBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TermQueryBuilder")]),s._v(" termQueryBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("termQuery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("termQueryBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchResponse")]),s._v(" searchResponse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("search")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理响应结果")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHits")]),s._v(" searchHits "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" value "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getTotalHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" hits "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHit")]),s._v(" hit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" hits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" source "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" hit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSourceAsString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(402),alt:"image-20231015163509556"}})]),s._v(" "),t("h5",{attrs:{id:"match查询-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#match查询-2"}},[s._v("#")]),s._v(" match查询")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("matchTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//发送请求")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 创建SearchRequest对象作为请求")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),s._v(" searchRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 创建SearchSourceBuilder用于携带查询参数")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),s._v(" searchSourceBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 使用QueryBuilders.查询方式名Query()创建查询方式对象，用于携带相应的查询参数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//        MatchQueryBuilder matchQueryBuilder = QueryBuilders.matchQuery("name", "修改后的李四");')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//        matchQueryBuilder.operator(Operator.AND);")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 改为链式编程格式")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MatchQueryBuilder")]),s._v(" matchQueryBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("matchQuery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"修改后的李四"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("operator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Operator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("AND")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("matchQueryBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 将参数放入请求：searchRequest.source(searchSourceBuilder)")]),s._v("\n        searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5. 使用RestHighLevelClient对象的search方法发送SearchRequest请求")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchResponse")]),s._v(" searchResponse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("search")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理结果")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 获取查询结果hits")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHits")]),s._v(" searchHits "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" total "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getTotalHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 从查询结果hits中获取所有记录集合hits")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" hits "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 遍历第二级hits中，遍历的元素中_source字段才是真正的数据")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHit")]),s._v(" searchHit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" hits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" source "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSourceAsString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(403),alt:"image-20231015164613350"}})]),s._v(" "),t("h5",{attrs:{id:"querystring-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#querystring-2"}},[s._v("#")]),s._v(" querystring")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("queryStringTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//发送请求")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 创建SearchRequest对象作为请求")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),s._v(" searchRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 创建SearchSourceBuilder用于携带查询参数")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),s._v(" searchSourceBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 使用QueryBuilders.查询方式名Query()创建查询方式对象，用于携带相应的查询参数")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryStringQueryBuilder")]),s._v(" queryStringQueryBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("queryStringQuery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"额尔古纳 OR 李四"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("field")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("field")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"address"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("queryStringQueryBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 将参数放入请求：searchRequest.source(searchSourceBuilder)")]),s._v("\n        searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5. 使用RestHighLevelClient对象的search方法发送SearchRequest请求")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchResponse")]),s._v(" searchResponse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("search")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理结果")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 获取查询结果hits")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHits")]),s._v(" searchHits "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" total "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getTotalHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 从查询结果hits中获取所有记录集合hits")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" hits "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 遍历第二级hits中，遍历的元素中_source字段才是真正的数据")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHit")]),s._v(" searchHit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" hits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" source "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSourceAsString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(404),alt:"image-20231015165128912"}})]),s._v(" "),t("h5",{attrs:{id:"范围、排序查询-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#范围、排序查询-2"}},[s._v("#")]),s._v(" 范围、排序查询")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rangAndSortTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//发送请求")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 创建SearchRequest对象作为请求")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),s._v(" searchRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 创建SearchSourceBuilder用于携带查询参数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),s._v(" searchSourceBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 使用QueryBuilders.查询方式名Query()创建查询方式对象，用于携带相应的查询参数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RangeQueryBuilder")]),s._v(" rangeQueryBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rangeQuery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("gte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rangeQueryBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置排序方式，按年龄降序排序")]),s._v("\n    searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SortOrder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DESC")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 将参数放入请求：searchRequest.source(searchSourceBuilder)")]),s._v("\n    searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5. 使用RestHighLevelClient对象的search方法发送SearchRequest请求")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchResponse")]),s._v(" searchResponse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("search")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理结果")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 获取查询结果hits")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHits")]),s._v(" searchHits "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" total "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getTotalHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 从查询结果hits中获取所有记录集合hits")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" hits "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 遍历第二级hits中，遍历的元素中_source字段才是真正的数据")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHit")]),s._v(" searchHit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" hits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" source "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSourceAsString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(405),alt:"image-20231015170901015"}})]),s._v(" "),t("h5",{attrs:{id:"bool复合查询-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bool复合查询-2"}},[s._v("#")]),s._v(" bool复合查询")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("\t"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("boolTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//发送请求")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 创建SearchRequest对象作为请求")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),s._v(" searchRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 创建SearchSourceBuilder用于携带查询参数")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),s._v(" searchSourceBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 使用QueryBuilders.查询方式名Query()创建查询方式对象，用于携带相应的查询参数")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BoolQueryBuilder")]),s._v(" boolQueryBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("boolQuery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查询条件1")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TermQueryBuilder")]),s._v(" termQueryBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("termQuery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查询条件2")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MatchQueryBuilder")]),s._v(" matchQueryBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("matchQuery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"address"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"湖北"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查询条件3")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MatchQueryBuilder")]),s._v(" matchQueryBuilder2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("matchQuery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"张三"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//        List<QueryBuilder> mustList = boolQueryBuilder.must();")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//        mustList.add(termQueryBuilder);")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//        mustList.add(matchQueryBuilder);")]),s._v("\n\n        boolQueryBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("must")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("termQueryBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("must")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("matchQueryBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("should")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("matchQueryBuilder2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n        searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("boolQueryBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 将参数放入请求：searchRequest.source(searchSourceBuilder)")]),s._v("\n        searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5. 使用RestHighLevelClient对象的search方法发送SearchRequest请求")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchResponse")]),s._v(" searchResponse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("search")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理结果")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 获取查询结果hits")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHits")]),s._v(" searchHits "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" total "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getTotalHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 从查询结果hits中获取所有记录集合hits")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" hits "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 遍历第二级hits中，遍历的元素中_source字段才是真正的数据")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchHit")]),s._v(" searchHit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" hits"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" source "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchHit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSourceAsString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(406),alt:"image-20231015172433453"}})]),s._v(" "),t("h5",{attrs:{id:"聚合查询-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#聚合查询-2"}},[s._v("#")]),s._v(" 聚合查询")]),s._v(" "),t("p",[t("strong",[s._v("指标聚合")])]),s._v(" "),t("p",[s._v("核心步骤")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//构造聚合函数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MaxAggregationBuilder")]),s._v(" maxAggregationBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AggregationBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("max")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max_age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("field")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsearchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("aggregation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("maxAggregationBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("详细步骤")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("aggsTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//发送请求")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 创建SearchRequest对象作为请求")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),s._v(" searchRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 创建SearchSourceBuilder用于携带查询参数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),s._v(" searchSourceBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 使用QueryBuilders.查询方式名Query()创建查询方式对象，用于携带相应的查询参数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RangeQueryBuilder")]),s._v(" rangeQueryBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rangeQuery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("gte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rangeQueryBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//构造聚合函数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MaxAggregationBuilder")]),s._v(" maxAggregationBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AggregationBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("max")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max_age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("field")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("aggregation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("maxAggregationBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置排序方式，按年龄降序排序")]),s._v("\n    searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SortOrder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DESC")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 将参数放入请求：searchRequest.source(searchSourceBuilder)")]),s._v("\n    searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5. 使用RestHighLevelClient对象的search方法发送SearchRequest请求")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchResponse")]),s._v(" searchResponse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("search")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Aggregations")]),s._v(" aggregations "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAggregations")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Max")]),s._v(" max "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" aggregations"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"max_age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("double")]),s._v(" maxAge "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" max"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getValue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maxAge = "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" maxAge"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(407),alt:"image-20231015174449297"}})]),s._v(" "),t("p",[t("strong",[s._v("桶聚合")])]),s._v(" "),t("p",[s._v("核心步骤")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//构造聚合函数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TermsAggregationBuilder")]),s._v(" termsAggregationBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AggregationBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("terms")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age_bucket"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("field")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsearchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("aggregation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("termsAggregationBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("详细步骤")]),s._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bucketAggsTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//发送请求")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 创建SearchRequest对象作为请求")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),s._v(" searchRequest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 创建SearchSourceBuilder用于携带查询参数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),s._v(" searchSourceBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchSourceBuilder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 使用QueryBuilders.查询方式名Query()创建查询方式对象，用于携带相应的查询参数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RangeQueryBuilder")]),s._v(" rangeQueryBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rangeQuery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("gte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rangeQueryBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//构造聚合函数")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TermsAggregationBuilder")]),s._v(" termsAggregationBuilder "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AggregationBuilders")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("terms")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age_bucket"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("field")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("aggregation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("termsAggregationBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置排序方式，按年龄降序排序")]),s._v("\n    searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SortOrder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DESC")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 将参数放入请求：searchRequest.source(searchSourceBuilder)")]),s._v("\n    searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchSourceBuilder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5. 使用RestHighLevelClient对象的search方法发送SearchRequest请求")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SearchResponse")]),s._v(" searchResponse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" restHighLevelClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("search")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("searchRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEFAULT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Aggregations")]),s._v(" aggregations "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" searchResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAggregations")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Terms")]),s._v(" terms "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" aggregations"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age_bucket"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Terms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Bucket")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" buckets "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" terms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBuckets")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Terms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Bucket")]),s._v(" bucket "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" buckets"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getKeyAsString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" docCount "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getDocCount")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('": "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" docCount"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(408),alt:"image-20231015175816867"}})]),s._v(" "),t("h5",{attrs:{id:"高亮查询-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#高亮查询-2"}},[s._v("#")]),s._v(" 高亮查询")]),s._v(" "),t("p",[s._v("将查询到的文档的指定的字段中匹配到的关键词添加指定的html标签使它在前端高亮显示。")]),s._v(" "),t("p",[s._v("应用场景：前端搜索后，在返回的数据中将匹配到的关键词高亮显示。")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 高亮查询")]),s._v("\nGET user/_search\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"query"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"match"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"李四"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", \n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"highlight"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fields"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pre_tags"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"<font color='red'>\"")]),s._v(", \n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"post_tags"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"</font>"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("img",{attrs:{src:a(409),alt:"image-20231016210013727"}})]),s._v(" "),t("h2",{attrs:{id:"elasticsearch集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch集群"}},[s._v("#")]),s._v(" ElasticSearch集群")]),s._v(" "),t("h3",{attrs:{id:"概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[s._v("#")]),s._v(" 概念")]),s._v(" "),t("p",[t("strong",[s._v("结点(Node)")]),s._v("：")]),s._v(" "),t("p",[s._v("Master Node: 负责创建删除索引、以及给节点分配分片等集群管理的工作。")]),s._v(" "),t("p",[s._v("Data Node: 负责存储文档、以及对文档数据的增删改查操作。")]),s._v(" "),t("p",[s._v("Coordinating Node: 负责接收客户端请求，并将请求分发到各个相关的结点，并最终收集各节点返回的结果，整合成一个统一的节点，返回给客户端。")]),s._v(" "),t("p",[t("strong",[s._v("分片")]),s._v("：ES中的数据都是存储在分片中，一个索引的一个分片只存储该索引的一部分数据，一个索引中的文档数据被存储在其所属的若干个分片中。")]),s._v(" "),t("p",[s._v("主分片：")]),s._v(" "),t("p",[s._v("副本分片：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(410),alt:"image-20231016223814967"}})]),s._v(" "),t("h3",{attrs:{id:"文档数据在es集群中的存储和搜索"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文档数据在es集群中的存储和搜索"}},[s._v("#")]),s._v(" 文档数据在ES集群中的存储和搜索")]),s._v(" "),t("h4",{attrs:{id:"文档的存储"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文档的存储"}},[s._v("#")]),s._v(" 文档的存储")]),s._v(" "),t("p",[s._v("① ES首先根据文档id的散列值，选择一个主分片，并将该分片发送到该主分片保存。")]),s._v(" "),t("p",[s._v("② 将该分片发送到其主分片对应的所有副本分片进行保存，(这样使得副本分片和主分片之间保持数据同步)。")]),s._v(" "),t("p",[s._v("数据同步使得副本分片可以服务于搜索请求，并在原有主分片无法访问时升级为主分片")]),s._v(" "),t("p",[t("img",{attrs:{src:a(411),alt:"image-20231016225005121"}})]),s._v(" "),t("p",[s._v("文档数据存储举例：")]),s._v(" "),t("p",[s._v("假如经过计算，该文档对应的主分片为a索引的主分片0，则先将该文档数据存入主分片0，然后将数据存储到两个副本分片0")]),s._v(" "),t("h4",{attrs:{id:"文档数据的搜索"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文档数据的搜索"}},[s._v("#")]),s._v(" 文档数据的搜索")]),s._v(" "),t("p",[s._v("主要采用轮训策略")]),s._v(" "),t("p",[s._v("① 搜索请求被一个ES Node接收，并将请求转发到一组包含所有数据的索引分片组合")]),s._v(" "),t("p",[s._v("② 在选择可用的分片时，使用轮训算法选择出一个分片组合，将请求转发给这个组合中的分片。")]),s._v(" "),t("p",[s._v("③ 从接收到请求的分片收集搜索到的结果，将其聚集到单一的回复，然后将回复返回给客户端。")]),s._v(" "),t("p",[t("img",{attrs:{src:a(412),alt:"image-20231016222539627"}})]),s._v(" "),t("h3",{attrs:{id:"脑裂问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#脑裂问题"}},[s._v("#")]),s._v(" 脑裂问题")]),s._v(" "),t("h2",{attrs:{id:"elasticsearch应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch应用"}},[s._v("#")]),s._v(" ElasticSearch应用")]),s._v(" "),t("p",[s._v("以商品搜索为例")]),s._v(" "),t("h3",{attrs:{id:"添加、删除文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加、删除文档"}},[s._v("#")]),s._v(" 添加、删除文档")]),s._v(" "),t("p",[s._v("① 在商品上架的时候将商品信息添加到ES")]),s._v(" "),t("p",[s._v("② 在商品下架的时候将商品从ES中删除")]),s._v(" "),t("p",[s._v("详细步骤")]),s._v(" "),t("p",[s._v("① 在商品上架的时候将商品信息添加到ES")]),s._v(" "),t("p",[s._v("​\ta. 创建一个document对应的类型对象，然后查询其相应的属性对应的参数值，然后给这些属性赋值(查询属性使用Product对外提供的API接口，属性主要有商品的基本信息、类目信息、品牌信息、平台属性)。")]),s._v(" "),t("p",[s._v("​\tb. 调用Repository的save方法将商品信息添加到ES。")]),s._v(" "),t("p",[s._v("② 在商品下架的时候将商品从ES中删除")]),s._v(" "),t("p",[s._v("​\t调用Repository的deleteById方法删除。")]),s._v(" "),t("h3",{attrs:{id:"查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询"}},[s._v("#")]),s._v(" 查询")]),s._v(" "),t("p",[s._v("① 构建查询DSL(NativeSearchQueryBuilder)，并调用其build方法创建NativeSearchQuery")]),s._v(" "),t("p",[s._v("② 调用RestTemplate对象的search方法进行查询")]),s._v(" "),t("p",[s._v("③ 解析查询结果")]),s._v(" "),t("p",[s._v("详细步骤：")]),s._v(" "),t("p",[s._v("① 构建查询DSL(NativeSearchQueryBuilder)，并调用其build方法创建NativeSearchQuery")]),s._v(" "),t("p",[s._v("​\t(1) 构建查询器NativeSearchQueryBuilder")]),s._v(" "),t("p",[s._v("​\t(2) 构建boolQueryBuilder，用于组合多个查询")]),s._v(" "),t("p",[s._v("​\t(3) 分别构建关键字查询、品牌查询、类目查询、平台属性查询，并放入boolQueryBuilder")]),s._v(" "),t("p",[s._v("​\t(4) 设置整个复合查询，将boolQueryBuilder添加到NativeSearchQueryBuilder(使用其withQuery方法)")]),s._v(" "),t("p",[s._v("​\t(5) 构建分页查询")]),s._v(" "),t("p",[s._v("​\t(6) 构建排序查询")]),s._v(" "),t("p",[s._v("​\t(7) 构建高亮查询")]),s._v(" "),t("p",[s._v("​\t(8) 构建聚合查询")]),s._v(" "),t("p",[s._v("​\t(9) 指定查询结果中的字段")]),s._v(" "),t("p",[s._v("② 调用RestTemplate对象的search方法进行查询")]),s._v(" "),t("p",[s._v("③ 解析查询结果")]),s._v(" "),t("p",[s._v("​\t(1) 解析商品信息goodsList")]),s._v(" "),t("p",[s._v("​\t(2) 解析商标trademarkList")]),s._v(" "),t("p",[s._v("​\t(3) 解析平台属性attrsList")]),s._v(" "),t("p",[s._v("​\t(4) 解析分页数据")]),s._v(" "),t("h3",{attrs:{id:"构建聚合查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建聚合查询"}},[s._v("#")]),s._v(" 构建聚合查询")]),s._v(" "),t("p",[s._v("品牌聚合")]),s._v(" "),t("p",[s._v("① 构建外层品牌id聚合(使用AggregationBuilders)")]),s._v(" "),t("p",[s._v("② 构建内层品牌名称聚合(外层聚合使用subAggregation方法将其添加)")]),s._v(" "),t("p",[s._v("③ 构建内层品牌LogoUrl聚合(外层聚合使用subAggregation方法将其添加)")]),s._v(" "),t("p",[s._v("平台属性聚合")]),s._v(" "),t("p",[s._v("① 创建外层nest聚合")]),s._v(" "),t("p",[s._v("② 构建外层平台属性id聚合(使用AggregationBuilders)")]),s._v(" "),t("p",[s._v("③ 构建内层属性名称聚合(外层聚合使用subAggregation方法将其添加)")]),s._v(" "),t("p",[s._v("④ 构建内层属性值聚合(外层聚合使用subAggregation方法将其添加)")]),s._v(" "),t("h3",{attrs:{id:"incrhotscore"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#incrhotscore"}},[s._v("#")]),s._v(" incrHotScore")]),s._v(" "),t("p",[s._v("① 在redis中用一个ScoreSortedSet记录商品的得分，在调用increHotScore方法的时候，让对应的商品score自增(使用socreSortedSet的addScore方法)")]),s._v(" "),t("p",[s._v("② 在ElasticSearch中修改对应商品的score，获取对应商品的document，然后获取对应的java对象，将该对象的score加1，然后保存到ElasticSearch")])])}),[],!1,null,null,null);t.default=e.exports}}]);