<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mybatis | 琅玕的博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="个人编程技术分享">
    
    <link rel="preload" href="/blog/assets/css/0.styles.671fbdd0.css" as="style"><link rel="preload" href="/blog/assets/js/app.e95f8842.js" as="script"><link rel="preload" href="/blog/assets/js/3.08356745.js" as="script"><link rel="preload" href="/blog/assets/js/20.7a923a3b.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.acf34bf9.js"><link rel="prefetch" href="/blog/assets/js/11.fef1fa27.js"><link rel="prefetch" href="/blog/assets/js/12.c774ebf1.js"><link rel="prefetch" href="/blog/assets/js/13.bf6af2da.js"><link rel="prefetch" href="/blog/assets/js/14.7b60b543.js"><link rel="prefetch" href="/blog/assets/js/15.5515032c.js"><link rel="prefetch" href="/blog/assets/js/16.3c0cd04c.js"><link rel="prefetch" href="/blog/assets/js/17.80206c1e.js"><link rel="prefetch" href="/blog/assets/js/18.e5e2c85c.js"><link rel="prefetch" href="/blog/assets/js/19.2f69b079.js"><link rel="prefetch" href="/blog/assets/js/2.9988781b.js"><link rel="prefetch" href="/blog/assets/js/21.d81d0001.js"><link rel="prefetch" href="/blog/assets/js/22.2fe5ab39.js"><link rel="prefetch" href="/blog/assets/js/23.99bc8ff5.js"><link rel="prefetch" href="/blog/assets/js/24.1fcf63f7.js"><link rel="prefetch" href="/blog/assets/js/25.a5536fa6.js"><link rel="prefetch" href="/blog/assets/js/26.e2fb222c.js"><link rel="prefetch" href="/blog/assets/js/27.03389df0.js"><link rel="prefetch" href="/blog/assets/js/28.4b72525f.js"><link rel="prefetch" href="/blog/assets/js/29.03a090ad.js"><link rel="prefetch" href="/blog/assets/js/30.87f31b47.js"><link rel="prefetch" href="/blog/assets/js/31.c639ea6f.js"><link rel="prefetch" href="/blog/assets/js/32.795ca246.js"><link rel="prefetch" href="/blog/assets/js/33.647699a4.js"><link rel="prefetch" href="/blog/assets/js/34.2909ac9c.js"><link rel="prefetch" href="/blog/assets/js/35.b5d4b577.js"><link rel="prefetch" href="/blog/assets/js/36.474a6bcb.js"><link rel="prefetch" href="/blog/assets/js/37.4590b450.js"><link rel="prefetch" href="/blog/assets/js/38.1cfbe263.js"><link rel="prefetch" href="/blog/assets/js/39.4c159456.js"><link rel="prefetch" href="/blog/assets/js/4.1c4b8134.js"><link rel="prefetch" href="/blog/assets/js/40.c52cb9af.js"><link rel="prefetch" href="/blog/assets/js/41.f77d6a1f.js"><link rel="prefetch" href="/blog/assets/js/42.c45631ae.js"><link rel="prefetch" href="/blog/assets/js/43.44644811.js"><link rel="prefetch" href="/blog/assets/js/44.c40d24aa.js"><link rel="prefetch" href="/blog/assets/js/45.0c1b86d7.js"><link rel="prefetch" href="/blog/assets/js/46.85dd5346.js"><link rel="prefetch" href="/blog/assets/js/47.a52d8379.js"><link rel="prefetch" href="/blog/assets/js/48.dfaedde6.js"><link rel="prefetch" href="/blog/assets/js/49.604893e5.js"><link rel="prefetch" href="/blog/assets/js/5.b41d7dd5.js"><link rel="prefetch" href="/blog/assets/js/50.228c7e1a.js"><link rel="prefetch" href="/blog/assets/js/51.7a95ac4e.js"><link rel="prefetch" href="/blog/assets/js/52.79ff7d2e.js"><link rel="prefetch" href="/blog/assets/js/53.7aeffa50.js"><link rel="prefetch" href="/blog/assets/js/54.c7097067.js"><link rel="prefetch" href="/blog/assets/js/6.31dc016b.js"><link rel="prefetch" href="/blog/assets/js/7.96c397d1.js"><link rel="prefetch" href="/blog/assets/js/8.e97d6841.js"><link rel="prefetch" href="/blog/assets/js/9.66ed6f07.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.671fbdd0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">琅玕的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/skills/" class="nav-link router-link-active">
  学习
</a></div><div class="nav-item"><a href="/blog/share/" class="nav-link">
  资源分享
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/skills/" class="nav-link router-link-active">
  学习
</a></div><div class="nav-item"><a href="/blog/share/" class="nav-link">
  资源分享
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/blog/skills/IoT" class="sidebar-heading clickable"><span>IoT</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/skills/IoT/基于NodeMcu的智慧生态农业系统设计.html" class="sidebar-link">基于NodeMcu的智慧生态农业系统设计</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/skills/JavaSE" class="sidebar-heading clickable"><span>JavaSE</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/skills/JavaSE/File类和IO流.html" class="sidebar-link">File类和IO流</a></li><li><a href="/blog/skills/JavaSE/Java基础手写笔记.html" class="sidebar-link">/skills/JavaSE/Java基础手写笔记.html</a></li><li><a href="/blog/skills/JavaSE/Java常用API.html" class="sidebar-link">Java常用API</a></li><li><a href="/blog/skills/JavaSE/Thread.html" class="sidebar-link">Thread</a></li><li><a href="/blog/skills/JavaSE/内部类.html" class="sidebar-link">内部类</a></li><li><a href="/blog/skills/JavaSE/反射.html" class="sidebar-link">反射</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/skills/DSDB" class="sidebar-heading clickable router-link-active open"><span>DSDB</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/skills/DSDB/Collection.html" class="sidebar-link">Java的集合类</a></li><li><a href="/blog/skills/DSDB/HTTP&amp;Tomcat.html" class="sidebar-link">HTTP&amp;Tomcat</a></li><li><a href="/blog/skills/DSDB/JDBC.html" class="sidebar-link">JDBC</a></li><li><a href="/blog/skills/DSDB/Map.html" class="sidebar-link">Map</a></li><li><a href="/blog/skills/DSDB/Maven.html" class="sidebar-link">Maven</a></li><li><a href="/blog/skills/DSDB/Mybatis.html" aria-current="page" class="active sidebar-link">Mybatis</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#快速入门" class="sidebar-link">快速入门</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#mybatis的作用" class="sidebar-link">Mybatis的作用</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#输入映射" class="sidebar-link">输入映射</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#一个参数" class="sidebar-link">一个参数</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#多个参数" class="sidebar-link">多个参数</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#对象传值" class="sidebar-link">对象传值</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#map传值" class="sidebar-link">Map传值</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#按位置传值" class="sidebar-link">按位置传值</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#输出映射" class="sidebar-link">输出映射</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#resulttype" class="sidebar-link">resultType</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#resultmap" class="sidebar-link">resultMap</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#和-的区别" class="sidebar-link">#{}和${}的区别</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#动态sql" class="sidebar-link">动态SQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#where" class="sidebar-link">where</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#if" class="sidebar-link">if</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#choose-when-otherwise" class="sidebar-link">choose when otherwise</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#sql-include" class="sidebar-link">sql-include</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#trim" class="sidebar-link">trim</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#set" class="sidebar-link">set</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#foreach" class="sidebar-link">foreach</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#selectkey" class="sidebar-link">selectKey</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#usegeneratdkey" class="sidebar-link">useGeneratdKey</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#多表查询" class="sidebar-link">多表查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#当使用分次查询的时候-多条sql语句" class="sidebar-link">当使用分次查询的时候（多条SQL语句）</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#当使用一次查询的时候-一条sql语句" class="sidebar-link">当使用一次查询的时候（一条SQL语句）</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#一对一" class="sidebar-link">一对一</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#一对多" class="sidebar-link">一对多</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DSDB/Mybatis.html#多对多" class="sidebar-link">多对多</a></li></ul></li></ul></li><li><a href="/blog/skills/DSDB/SQL.html" class="sidebar-link">SQL</a></li><li><a href="/blog/skills/DSDB/Stream.html" class="sidebar-link">Stream</a></li><li><a href="/blog/skills/DSDB/前端.html" class="sidebar-link">前端</a></li><li><a href="/blog/skills/DSDB/数据库索引.html" class="sidebar-link">数据库索引</a></li><li><a href="/blog/skills/DSDB/连接池.html" class="sidebar-link">/skills/DSDB/连接池.html</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/skills/JavaEE&amp;Spring" class="sidebar-heading clickable"><span>JavaEE&amp;Spring</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/skills/JavaEE&amp;Spring/MyBatis-Spring.html" class="sidebar-link">MyBatis - Spring、Spring事务</a></li><li><a href="/blog/skills/JavaEE&amp;Spring/Request&amp;Response.html" class="sidebar-link">Request &amp; Response</a></li><li><a href="/blog/skills/JavaEE&amp;Spring/Servlet.html" class="sidebar-link">Servlet</a></li><li><a href="/blog/skills/JavaEE&amp;Spring/SpringAOP.html" class="sidebar-link">Spring AOP</a></li><li><a href="/blog/skills/JavaEE&amp;Spring/SpringBoot.html" class="sidebar-link">SpringBoot</a></li><li><a href="/blog/skills/JavaEE&amp;Spring/SpringIOC.html" class="sidebar-link">Spring IOC</a></li><li><a href="/blog/skills/JavaEE&amp;Spring/SpringMVC.html" class="sidebar-link">Spring MVC</a></li><li><a href="/blog/skills/JavaEE&amp;Spring/设计模式.html" class="sidebar-link">设计模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/skills/微服务" class="sidebar-heading clickable"><span>微服务</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/skills/微服务/ElasticSearch.html" class="sidebar-link">ElasticSearch</a></li><li><a href="/blog/skills/微服务/Gateway.html" class="sidebar-link">Gateway</a></li><li><a href="/blog/skills/微服务/MapStruct.html" class="sidebar-link">MapStruct</a></li><li><a href="/blog/skills/微服务/Mybatis-Plus.html" class="sidebar-link">Mybatis-Plus</a></li><li><a href="/blog/skills/微服务/Nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/blog/skills/微服务/Redis.html" class="sidebar-link">Redis</a></li><li><a href="/blog/skills/微服务/Redis在Java项目中的使用.html" class="sidebar-link">Redis在Java项目中的使用</a></li><li><a href="/blog/skills/微服务/RocketMQ.html" class="sidebar-link">RocketMQ</a></li><li><a href="/blog/skills/微服务/SpringCloud.html" class="sidebar-link">SpringCloud</a></li><li><a href="/blog/skills/微服务/微服务.html" class="sidebar-link">微服务</a></li><li><a href="/blog/skills/微服务/微服务架构和单体架构.html" class="sidebar-link">微服务架构和单体架构</a></li><li><a href="/blog/skills/微服务/秒杀.html" class="sidebar-link">秒杀</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/skills/面试" class="sidebar-heading clickable"><span>面试</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/skills/面试/面经.html" class="sidebar-link">面经</a></li><li><a href="/blog/skills/面试/面试准备.html" class="sidebar-link">面试准备</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mybatis"><a href="#mybatis" class="header-anchor">#</a> Mybatis</h1> <h2 id="快速入门"><a href="#快速入门" class="header-anchor">#</a> 快速入门</h2> <p>在pom.xml中配置好相关依赖(Mybatis、mysql...)</p> <p>以对<strong>User类</strong>操作为例，数据库中有对应的<strong>user表</strong></p> <p><strong>准备工作</strong></p> <ol><li><p>配置Mybatis-config.xml文件</p> <p>将UserMapper.xml导入到Mybatis-config.xml中。导入Mapper.xml所在的目录可以一劳永逸。</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;mappers&gt;
    &lt;package name=&quot;com.demo.JsonResponse.mapper&quot;/&gt;
&lt;/mappers&gt;
</code></pre></div></li> <li><p>写UserMapper接口</p> <p>写要调用的增删改查方法</p></li> <li><p>配置UserMapper.xml文件</p> <p>为UserMapper接口中的每一个方法写对应的sql语句。</p></li></ol> <p>注意：UserMapper.xml的namespace保持一致的地方</p> <table><thead><tr><th>UserMapper接口</th> <th>UserMapper.xml</th></tr></thead> <tbody><tr><td>全限定类名</td> <td>namespace</td></tr> <tr><td>方法名</td> <td>标签id</td></tr> <tr><td>方法返回值类型</td> <td>标签中resultType（只有“查”才需要写）</td></tr></tbody></table> <p>UserMapper.xml与UserMapper.java名字要保持一致（映射文件名字和接口名要保持一致）</p> <p>UserMapper.xml与UserMapper.java路径要保持一致（UserMapper.xml在resources目录下的路径名称要和Usermapper.xml在java目录下的路径名称相同。</p> <p><strong>使用</strong></p> <ol><li><p>读取Mybatis配置文件</p> <p><code>InputStream inputStream = Resources.getResourceAsStream(&quot;Mybatis-config.xml&quot;)</code></p></li> <li><p>创建一个sqlSessionFactory</p> <p>通过<code>new SqlSessionFactoryBuilder().build(inputstream)</code></p></li> <li><p>通过sqlSessionFactory获取一个sqlSession</p> <p><code>sqlSessionFactory.openSession()</code></p></li> <li><p>获取动态代理对象</p> <p><code>sqlSession.getMapper(UserMapper.class)</code></p></li> <li><p>调用接口中的方法</p></li></ol> <p>前三步可以封装成工具类。</p> <p><img src="/blog/assets/img/image-20230827101539928.bf64b162.png" alt="image-20230827101539928"></p> <div class="language-java extra-class"><pre class="language-java"><code></code></pre></div><p>以User为例</p> <p>Order类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">BigDeciaml</span> price<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> createTime<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> updateTime<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>OrderMapper.java</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderMapper</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryAllorder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Order</span> <span class="token function">queryOrderById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>OrderMapper.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
   <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
   <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- namespace: 命名空间，整个项目中必须唯一，暂时可以任意取名(后面再进行标准化) --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mybatis2.mapper.OrderMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mybatis2.bean.Order<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>create_time<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createTime<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update_time<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateTime<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryAllOrder<span class="token punctuation">&quot;</span></span><span class="token attr-name">,</span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	select * from `order`;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryOrderById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	select * from `order` where id = #{id};
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>存在的问题：</p> <p>需要用到配置文件名称、类名、全限定类名的地方要写全称。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com/demo/mybatis/mapper/OrderMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mybatis.mapper.OrderMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="mybatis的作用"><a href="#mybatis的作用" class="header-anchor">#</a> Mybatis的作用</h2> <p><strong>将数据库中的数据转换成java中的对象</strong>，要实现转换的过程，需要有</p> <ol><li>要转换的类(User)</li> <li>用于获取对象（数据）的接口(UserMapper.xml)</li> <li>映射文件(UserMapper.xml)</li></ol> <p>如何映射</p> <p>Mybatis通过Mapper.xml文件中的SQL语句标签中有resultType和resultMap</p> <p>resultType用于确定SQL数据转换成java中的什么类型和转换成什么类型以及变量之间的</p> <p>resultMap用于确定SQL数据转换成java中的什么类型以及变量之间的对应关系</p> <p>确定好上述关系后，Mybatis会帮我们自动将数据库数据转换成java数据类型。</p> <p>也就是说，<strong>我们在mapper.xml（映射）文件中告诉Mybatis将数据库中的数据转换成哪个类的对象以及变量之间的对应关系，Mybatis就会自动帮我们转换。</strong></p> <h2 id="输入映射"><a href="#输入映射" class="header-anchor">#</a> 输入映射</h2> <p>输入映射：如何将java中的变量值传递给SQL语句，SQL语句如何获取参数。</p> <p>参数一般通过接口中的抽象方法的形参传入</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderMapper</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryAllorder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Order</span> <span class="token function">queryOrderById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="一个参数"><a href="#一个参数" class="header-anchor">#</a> 一个参数</h3> <ol><li>用#{任意值}取值</li> <li>在方法的形参加@Param注解，通过#{注解值}来访问。</li></ol> <h3 id="多个参数"><a href="#多个参数" class="header-anchor">#</a> 多个参数</h3> <div class="language- extra-class"><pre><code>1. 在方法的形参加@Param注解，通过#{注解值}来访问。
1. 按位置传值
</code></pre></div><h3 id="对象传值"><a href="#对象传值" class="header-anchor">#</a> 对象传值</h3> <ol><li>使用#{成员变量名}来取值。</li> <li>对象有注解，通过#{注解值.成员变量名}来访问。</li></ol> <h3 id="map传值"><a href="#map传值" class="header-anchor">#</a> Map传值</h3> <ol><li>使用Map中的key来传值(#{key})</li> <li>Map有注解，通过#{注解值.key}访问</li></ol> <h3 id="按位置传值"><a href="#按位置传值" class="header-anchor">#</a> 按位置传值</h3> <ol><li><p>按形参中的参数顺序依次用arg0、arg1、arg2...称呼</p> <p>通过#{arg0}、#{arg1}、#{arg2}...传值</p></li> <li><p>按形参中的参数顺序依次用param1、param2、param3...称呼</p> <p>通过#{param1}、#{param1}、#{param1}...传值</p></li></ol> <h2 id="输出映射"><a href="#输出映射" class="header-anchor">#</a> 输出映射</h2> <p>输出映射：如何将SQL语句查询到的结果传递给java中的变量，java对象如何获取参数。</p> <p>resultType/resultMap</p> <h3 id="resulttype"><a href="#resulttype" class="header-anchor">#</a> resultType</h3> <p>接口中返回值类型是什么/SQL语句返回值类型是什么，resultType就写什么，自定义类型要写全限定类名，jdk自带类型可以写简写。</p> <p><strong>一条返回结果和多条返回结果</strong>的resultType是一样的。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderMapper</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryAllorder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Order</span> <span class="token function">queryOrderById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryAllOrder<span class="token punctuation">&quot;</span></span><span class="token attr-name">,</span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mybatis2.bean.Order<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    	select * from `order`;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="resultmap"><a href="#resultmap" class="header-anchor">#</a> resultMap</h3> <p>用于指明<strong>数据库中的每个字段</strong>（变量）对应<strong>Java中指定对象类型的哪个变量</strong>，在数据库查询信息后，就知道该把数据库哪个字段的值给Java中哪个变量了。</p> <p>column是数据库中的字段名，property是Java中的变量名</p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mybatis2.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>create_time<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createTime<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update_time<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateTime<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="和-的区别"><a href="#和-的区别" class="header-anchor">#</a> #{}和${}的区别</h2> <p>#{} 是预编译处理，${} 是字符串替换</p> <p>mybatis在处理#{}时，会将SQL语句中的#{}替换为?号，调用PreparedStatement的set方法来赋值;</p> <p>mybatis在处理${}时，就是把${}替换成变量的值。</p> <p>使用#{}可以有效的防止SQL注入，提高系统安全性。</p> <h2 id="动态sql"><a href="#动态sql" class="header-anchor">#</a> 动态SQL</h2> <p>根据传入的参数动态地改变SQL语句。</p> <h3 id="where"><a href="#where" class="header-anchor">#</a> where</h3> <p>帮助我们在最终执行的SQL语句中自动生成where关键字，where标签内部一般搭配其他标签使用</p> <h3 id="if"><a href="#if" class="header-anchor">#</a> if</h3> <p>根据接口的方法形参传入的参数是否满足某个条件决定是否拼接该标签里面的内容。</p> <p>**使用场景：**对一个对象的各个属性进行筛选，筛选条件可以一到多个。</p> <p>**举例：**对手机各个属性进行筛选，查询符合条件的手机。</p> <p>只有对某个属性设置了筛选条件，才会拼接该筛选条件</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    pirvate <span class="token class-name">String</span> brand<span class="token punctuation">;</span>
    <span class="token class-name">Private</span> <span class="token class-name">BigDecimal</span> price<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> disk<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用一个Phone对象存储筛选条件</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PhoneMapper</span> <span class="token punctuation">{</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Phone</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryPhoneByCondition</span><span class="token punctuation">(</span><span class="token class-name">Phone</span> phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当传递给SQL语句的属性不为null，就说明该属性是筛选条件，就将它拼接到SQL语句中。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryPhoneByCondition<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phoneResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from `order`
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        	id = #{id}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        	and brand = #{brand}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>memory != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        	and memeory = #{memeory}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>&lt;if test=&quot;id != null&quot;&gt;</code>中test属性就是用来写判断条件的。而判断条件(test)中的变量书写规则和&quot;#{}&quot;中的变量书写规则一样，只是没有外面的&quot;#{}&quot;。</p> <h3 id="choose-when-otherwise"><a href="#choose-when-otherwise" class="header-anchor">#</a> choose when otherwise</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>choose</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>otherwise</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>otherwise</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>choose</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>相当于</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
</code></pre></div><p><when>标签中有判断条件&quot;test&quot;，使用方法和<if>标签中的&quot;test&quot;用法是一样的。</if></when></p> <p>示例：如果</p> <div class="language-xml extra-class"><pre class="language-xml"><code></code></pre></div><h3 id="sql-include"><a href="#sql-include" class="header-anchor">#</a> sql-include</h3> <p>使用<sql>标签将一些公用的SQL提取出来，在需要用到的地方可以使用<include>标签引入这个SQL。</include></sql></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>base_sql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from phone
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryPhoneById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phoneResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>base_sql<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>为了不影响可读性，sql-include一般用于提取列名。</p> <h3 id="trim"><a href="#trim" class="header-anchor">#</a> trim</h3> <p>可以帮助我们在动态SQL标签中的SQL语句中增加或者删除指定的字符串。</p> <p><trim>标签可选的参数</trim></p> <p>prefix: 增加指定的前缀</p> <p>suffix: 增加指定的后缀</p> <p>prefixOverrides: 删除指定的前缀</p> <p>suffixOverrides: 删除指定的后缀</p> <p><strong><trim>的作用域在<trim>内部</trim></trim></strong></p> <h3 id="set"><a href="#set" class="header-anchor">#</a> set</h3> <p>更新数据库信息时使用，对应SQL语句</p> <p><set>相当于<trim prefix="SET" suffixOverrides=","></trim></set></p> <h3 id="foreach"><a href="#foreach" class="header-anchor">#</a> foreach</h3> <p><strong>实际上就是将List或数组中的内容按某种格式拼接起来。</strong></p> <p><foreach>属性</foreach></p> <p>collection: 传入的类型或注解值</p> <p>item: 从list或数组中拿出的数据</p> <p>open: 整个字符串以什么字符开头</p> <p>close: 整个字符串以什么字符结尾</p> <p>separator: 每一项数据之间用什么符号分割</p> <h4 id="批量插入"><a href="#批量插入" class="header-anchor">#</a> 批量插入</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> <span class="token function">insertPhoneList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Phone</span><span class="token punctuation">&gt;</span></span> phoneList<span class="token punctuation">)</span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertPhoneList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	insert into phone(id, name, brand, memory, disk) values
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">colleation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phone<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        (#{phone.id}, #{phone.name}, #{phone.brand}, #{phone.memory}, #{index})
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>当传入参数为List的时候collection的属性值写&quot;list&quot;</p> <p>当传入参数为数组的时候collection属性值写&quot;array&quot;</p> <p>当传入的参数使用注解的时候collection的属性值写该注解</p> <h4 id="使用in查询"><a href="#使用in查询" class="header-anchor">#</a> 使用in查询</h4> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryPhoneByIdList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>phoneResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select * from phone
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
    	id in
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        	#{id}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="selectkey"><a href="#selectkey" class="header-anchor">#</a> selectKey</h3> <p>在执行SQL语句之前或之后获取最后插入的id。在自动生成id的场景下，我们获取自动生成的id就可以使用该方法，将id值返回给对象的指定参数。</p> <h3 id="usegeneratdkey"><a href="#usegeneratdkey" class="header-anchor">#</a> useGeneratdKey</h3> <p>获取insert/update操作数据的主键，把这个主键的值返回给对象的指定参数</p> <h2 id="多表查询"><a href="#多表查询" class="header-anchor">#</a> 多表查询</h2> <p>在多表查询中，首先要确定这次个查询结果是给哪个类的对象，从而确定对应的resultMap，<strong>根据这个类的对象的属性确定resultMap中需要写哪些内容</strong>，以及<strong>确定获取数据库哪些字段</strong>（确定SQL语句）。例如：商店和商品的多对多关系中，你要查询某个商店信息，商店的数据结构如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Shops</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Goods</span><span class="token punctuation">&gt;</span></span> goodsList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中List<Goods> goodsList为List，就需要用<collection>标签，List其中的Goods是一次查询得到的话<collection>中直接写Goods的<result>或<id>映射关系就行了，如果List还要通过另外一个SQL语句查询的话，就在collection标签中调用该SQL语句。</id></result></collection></collection></Goods></p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shopResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mybatis2.bean.Shops<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mybatis2.bean.Goods<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mybatis2.mapper.GoodsMapper.queryGoodsWithShopIdById<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong><association>用于一对一查询</association></strong>，<strong><collection>用于一对多查询</collection></strong></p> <h3 id="当使用分次查询的时候-多条sql语句"><a href="#当使用分次查询的时候-多条sql语句" class="header-anchor">#</a> 当使用分次查询的时候（多条SQL语句）</h3> <p><collection>或<association>标签中要有的参数</association></collection></p> <p>property: 查询结果给java中的哪个变量</p> <p>ofType: 查询结果的类型</p> <p>column: 当前SQL语句传递给跳转的SQL语句的参数</p> <p>select: 执行哪个SQL语句</p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shopResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mybatis2.bean.Shops<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mybatis2.bean.Goods<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mybatis2.mapper.GoodsMapper.queryGoodsWithShopIdById<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="当使用一次查询的时候-一条sql语句"><a href="#当使用一次查询的时候-一条sql语句" class="header-anchor">#</a> 当使用一次查询的时候（一条SQL语句）</h3> <p><collection>或<association>标签中要有的参数只需要property和ofType</association></collection></p> <p>但是在标签对中要写参数的映射关系</p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsResultMap2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mybatis2.bean.Goods<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsDetail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mybatis2.bean.GoodsDetail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>d_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>d_price<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>d_mount<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mount<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="一对一"><a href="#一对一" class="header-anchor">#</a> 一对一</h3> <p>用户表 - 用户详情表</p> <h3 id="一对多"><a href="#一对多" class="header-anchor">#</a> 一对多</h3> <p>班级表 - 学生表</p> <h3 id="多对多"><a href="#多对多" class="header-anchor">#</a> 多对多</h3> <p>学生表 - 选课表(关系表) - 课程表</p> <p>多对多包含两个一对多，一个学生对应多个课程，一个课程也对应多个学生。</p> <p>表格：</p> <table><thead><tr><th style="text-align:center;">shops</th> <th style="text-align:center;">good_related_shop</th> <th style="text-align:center;">goods</th> <th style="text-align:center;">goods_detail</th></tr></thead> <tbody></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> goods
<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    create_time <span class="token keyword">timestamp</span> <span class="token keyword">default</span> <span class="token keyword">current_timestamp</span><span class="token punctuation">,</span>
    update_time <span class="token keyword">timestamp</span> <span class="token keyword">default</span> <span class="token keyword">current_timestamp</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">current_timestamp</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> goods_detail
<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    goods_id <span class="token keyword">int</span><span class="token punctuation">,</span>
    price <span class="token keyword">decimal</span><span class="token punctuation">,</span>
    mount <span class="token keyword">int</span><span class="token punctuation">,</span>
    create_time <span class="token keyword">timestamp</span> <span class="token keyword">default</span> <span class="token keyword">current_timestamp</span><span class="token punctuation">,</span>
    update_time <span class="token keyword">timestamp</span> <span class="token keyword">default</span> <span class="token keyword">current_timestamp</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">current_timestamp</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> goods <span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token keyword">values</span>
<span class="token punctuation">(</span><span class="token string">&quot;华为&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">&quot;小米&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">&quot;OPPO&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">&quot;苹果&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> goods_detail <span class="token punctuation">(</span>goods_id<span class="token punctuation">,</span> price<span class="token punctuation">,</span> mount<span class="token punctuation">)</span>
<span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7000</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9000</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> shops
<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    create_time <span class="token keyword">timestamp</span> <span class="token keyword">default</span> <span class="token keyword">current_timestamp</span><span class="token punctuation">,</span>
    update_time <span class="token keyword">timestamp</span> <span class="token keyword">default</span> <span class="token keyword">current_timestamp</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">current_timestamp</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> good_related_shop
<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    goods_id <span class="token keyword">int</span><span class="token punctuation">,</span>
    shops_id <span class="token keyword">int</span><span class="token punctuation">,</span>
    create_time <span class="token keyword">timestamp</span> <span class="token keyword">default</span> <span class="token keyword">current_timestamp</span><span class="token punctuation">,</span>
    update_time <span class="token keyword">timestamp</span> <span class="token keyword">default</span> <span class="token keyword">current_timestamp</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">current_timestamp</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> shops <span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;苏宁&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">&quot;520超市&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">&quot;中百&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> good_related_shop <span class="token punctuation">(</span>goods_id<span class="token punctuation">,</span> shops_id<span class="token punctuation">)</span>
<span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>有问题：</p> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryGoodsWithShopIdById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsShopsResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select g.id,
        g.name,
        d.id as d_id,
        d.goods_id goods_id,
        d.price as d_price,
        d.mount as d_mount
        from goods g inner join goods_detail d on g.id = d.id inner join shops s on g.id = s.id where s.id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><table><thead><tr><th style="text-align:center;">shops</th> <th style="text-align:center;">good_related_shop</th> <th style="text-align:center;">goods</th></tr></thead> <tbody></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">from</span> goods g <span class="token keyword">inner</span> <span class="token keyword">join</span> goods_detail d <span class="token keyword">on</span> g<span class="token punctuation">.</span>id <span class="token operator">=</span> d<span class="token punctuation">.</span>id <span class="token keyword">inner</span> <span class="token keyword">join</span> shops s <span class="token keyword">on</span> g<span class="token punctuation">.</span>id <span class="token operator">=</span> s<span class="token punctuation">.</span>id <span class="token keyword">where</span> s<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token comment">#{id}</span>
<span class="token comment">-- 连接条件为 商品id = 商品id</span>
<span class="token comment">-- 应该改为                            goods.id = goods_detail.goods_id</span>
<span class="token keyword">from</span> goods g <span class="token keyword">inner</span> <span class="token keyword">join</span> goods_detail d <span class="token keyword">on</span> g<span class="token punctuation">.</span>id <span class="token operator">=</span> d<span class="token punctuation">.</span>goods_id <span class="token keyword">inner</span> <span class="token keyword">join</span> good_related_shop r <span class="token keyword">on</span> g<span class="token punctuation">.</span>id <span class="token operator">=</span> r<span class="token punctuation">.</span>goods_id <span class="token keyword">where</span> s<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token comment">#{id}</span>
</code></pre></div><p>column对应sql语句中的变量名称，</p> <p>property对应java中变量的名称。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/skills/DSDB/Maven.html" class="prev">
        Maven
      </a></span> <span class="next"><a href="/blog/skills/DSDB/SQL.html">
        SQL
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.e95f8842.js" defer></script><script src="/blog/assets/js/3.08356745.js" defer></script><script src="/blog/assets/js/20.7a923a3b.js" defer></script>
  </body>
</html>
